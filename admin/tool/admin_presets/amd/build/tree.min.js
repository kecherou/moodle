define(["jquery","core/ajax","core/yui"],function(e,t,i){let n=function(){};return n.prototype.view=null,n.prototype.nodes=null,{init:function(){i.use("yui2-treeview",function(e){n.view=new e.YUI2.widget.TreeView("settings_tree_div"),(n.nodes=[]).root=n.view.getRoot()})},addNodes:function(e,t,o,d,r){i.use("yui2-treeview",function(i){let l=e.length;for(let s=0;s<l;s++){let l=e[s],g=t[s],u=decodeURIComponent(o[s]),p=decodeURIComponent(d[s]),c=r[s],h=new i.YUI2.widget.HTMLNode(u,n.nodes[c]);h.settingId=l,h.setNodesProperty("title",p),h.highlightState=1,n.nodes[g]=h}})},render:function(){i.use("yui2-treeview",function(e){let t=n.view.getNodesByProperty("settingId","category");if(t)for(let e=0;e<t.length;e++)t[e].hasChildren()||n.view.popNode(t[e]);if(t=n.view.getRoot().children)for(let e=0;e<t.length;e++)t[e].hasChildren()||n.view.popNode(t[e]);n.view.setNodesProperty("propagateHighlightUp",!0),n.view.setNodesProperty("propagateHighlightDown",!0),n.view.subscribe("clickEvent",n.view.onEventToggleHighlight),n.view.render(),e.YUI2.util.Event.on("id_admin_presets_submit","click",function(){let t=document.getElementById("id_admin_presets_submit").parentNode,i=n.view.getNodesByProperty("highlightState",1);if(e.YUI2.lang.isNull(i))e.YUI2.log("Nothing selected");else{let n=[];for(let e=0;e<i.length;e++){let o=i[e];if("category"!==o.settingId&&"page"!==o.settingId&&(n.push(o.settingId),!document.getElementById(o.settingId))){let e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",o.settingId),e.setAttribute("value","1"),t.appendChild(e)}}e.YUI2.log("Checked settings:\n"+n.join("\n"),"info")}})})}}});